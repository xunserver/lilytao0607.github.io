---
import { localizedPath } from '../../lib/paths';
import { getTranslations } from '../../lib/i18n';

interface Props {
  locale?: 'nl' | 'en' | 'de' | 'pl' | 'zh';
}

const { locale = 'nl' } = Astro.props;
const currentLocale = locale;

const currentYear = new Date().getFullYear();
const gt = getTranslations('global', currentLocale);
const t = gt.footer;

const footerLinks = {
  about: [
    { name: gt.nav.about, href: localizedPath('/about', currentLocale) },
    { name: gt.nav.movements, href: localizedPath('/movements', currentLocale) },
    { name: gt.nav.courses, href: localizedPath('/courses', currentLocale) },
  ],
  community: [
    { name: gt.nav.students, href: localizedPath('/students', currentLocale) },
    { name: t.philosophy, href: localizedPath('/about#philosophy', currentLocale) },
    { name: t.contact, href: localizedPath('/courses', currentLocale) },
  ],
};

// copyright ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÈúÄË¶ÅË∞ÉÁî®
const copyrightText = typeof t.copyright === 'function' ? t.copyright(currentYear) : t.copyright;
---

<footer class="bg-ink transition-colors duration-500 mt-20 relative overflow-hidden">
  <!-- Ê∞¥Â¢®Ë£ÖÈ•∞ËÉåÊôØ -->
  <div class="absolute inset-0 opacity-5">
    <div class="absolute top-0 left-1/4 w-96 h-96 bg-accent rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-cyan rounded-full blur-3xl"></div>
  </div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative z-10">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12">
      <!-- Logo ÂíåÁÆÄ‰ªã -->
      <div class="lg:col-span-1">
        <a href={localizedPath('/', currentLocale)} class="flex items-center space-x-3 mb-6 group">
          <img
            src="/image/taichi-logo.png"
            alt={gt.siteName}
            width="48"
            height="48"
            class="h-12 w-12 object-contain group-hover:rotate-180 transition-transform duration-700"
          />
          <span class="text-xl font-serif font-bold text-paper">
            {gt.siteName}
          </span>
        </a>
        <p class="text-sm text-ink-light leading-relaxed">
          {t.description}
        </p>
      </div>

      <!-- ÂÖ≥‰∫éÈìæÊé• -->
      <div>
        <h3 class="text-sm font-semibold text-paper uppercase tracking-wider mb-6 flex items-center">
          <span class="w-8 h-0.5 bg-accent mr-3"></span>
          {t.explore}
        </h3>
        <ul class="space-y-4">
          {footerLinks.about.map((link) => (
            <li>
              <a
                href={link.href}
                class="text-sm text-ink-light hover:text-accent transition-colors duration-300 inline-flex items-center group"
              >
                <span class="group-hover:translate-x-1 transition-transform duration-300">‚Üí</span>
                <span class="ml-2">{link.name}</span>
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Á§æÂå∫ÈìæÊé• -->
      <div>
        <h3 class="text-sm font-semibold text-paper uppercase tracking-wider mb-6 flex items-center">
          <span class="w-8 h-0.5 bg-cyan mr-3"></span>
          {t.community}
        </h3>
        <ul class="space-y-4">
          {footerLinks.community.map((link) => (
            <li>
              <a
                href={link.href}
                class="text-sm text-ink-light hover:text-cyan transition-colors duration-300 inline-flex items-center group"
              >
                <span class="group-hover:translate-x-1 transition-transform duration-300">‚Üí</span>
                <span class="ml-2">{link.name}</span>
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- ËÅîÁ≥ª‰ø°ÊÅØ -->
      <div>
        <h3 class="text-sm font-semibold text-paper uppercase tracking-wider mb-6 flex items-center">
          <span class="w-8 h-0.5 bg-secondary mr-3"></span>
          {t.contact}
        </h3>
        <ul class="space-y-4">
          <li class="flex items-start space-x-3">
            <span class="text-accent mt-0.5">üìß</span>
            <div>
              <p class="text-xs text-ink-light">{t.email.label}</p>
              <p class="text-sm text-paper font-medium">{t.email.address}</p>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- Â∫ïÈÉ®ÁâàÊùÉ‰ø°ÊÅØ -->
    <div class="mt-16 pt-8 border-t border-paper/10">
      <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
        <p class="text-sm text-ink-light">
          {copyrightText}
        </p>
        <p class="text-sm text-ink-light">
          {t.tagline}
        </p>
      </div>
    </div>
  </div>
</footer>
